import{h as i}from"./client-D6K6htDN.js";import{aa as r}from"./index-BJM9FpXo.js";const u=r("issues",{state:()=>({issues:[],issue:{},filters:{search:"",status:null,priority:null,tags:[],page:1,perPage:10},isLoading:!1}),actions:{async fetchIssues(){this.isLoading=!0;try{const s=await i.get("/issues",{query:{search:this.filters.search||void 0,status:this.filters.status||void 0,priority:this.filters.priority||void 0,tags:this.filters.tags.length?this.filters.tags:void 0,page:this.filters.page,per_page:this.filters.perPage}});this.issues=s.issues,this.pagination=s.pagination}finally{this.isLoading=!1}},async createIssue(s){this.isLoading=!0;try{const t=(await i.post("/issues",s)).data;return this.issues.unshift(t),t}finally{this.isLoading=!1}},async updateIssue(s,t){this.isLoading=!0;try{await i.patch(`/issues/${s}`,t),await this.fetchIssue(s)}finally{this.isLoading=!1}},async updateIssueStatus(s,t){this.isLoading=!0;try{await i.patch(`/issues/${s}`,{status:t}),await this.fetchIssue(s)}finally{this.isLoading=!1}},async fetchIssue(s){this.issue=(await i.get(`/issues/${s}`)).issue},async deleteIssue(s){this.isLoading=!0;try{await i.delete(`/issues/${s}`),this.issues=this.issues.filter(t=>t.id!==s)}finally{this.isLoading=!1}},async addAssignee(s,t,e){try{await i.post(`/issues/${s}/assignees`,{type:t,assignee_ids:e}),await this.fetchIssue(s)}catch(a){console.error(a)}},async removeAssignee(s,t,e){try{await i.delete(`/issues/${s}/assignees/${e}`,{type:t}),await this.fetchIssue(s)}catch(a){console.error(a)}},updateFilters(s){this.filters={...this.filters,...s,page:1}}}});export{u};
