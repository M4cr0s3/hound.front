import{h as a}from"./client-D6K6htDN.js";import{aa as w,i as s,f as h,c as d,k as U,R as S}from"./index-BJM9FpXo.js";const k=w("users",()=>{const o=s([]),n=s({}),u=s({search:"",page:1,perPage:10}),r=s({}),t=s(!1),c=s(),i=h();async function l(){try{t.value=!0;const e=await a.get("/users",{query:u.value});o.value=e.users,c.value=e.pagination}finally{t.value=!1}}async function f(){n.value=(await a.get("/users/me")).user}async function p(e){t.value=!0;try{(await a.post("/users",e)).success&&await i.push(S.USER.INDEX)}catch(g){r.value=g.data.errors}finally{t.value=!1}}const y=async()=>{(await a.get("/auth/logout")).status==="success"&&(localStorage.removeItem("token"),await i.push("/login"))},v=async e=>{await a.delete(`/users/${e}`),await l()},m=d(()=>e=>r.value[e]);return U(async()=>{localStorage.getItem("token")&&await f()}),{users:o,filters:u,errors:r,isLoading:t,pagination:c,currentUser:n,fetchUsers:l,getCurrentUser:f,createUser:p,logout:y,destroy:v,getError:m}});export{k as u};
