import{d as b,A as y,m as V,x as v,l as g,w as l,i as f,g as k,R as w,o as I,b as n,e as i,f as o,h as N,K as $}from"./index-DE4-Xfkr.js";import"./iconify-wA6gYNuD.js";import{_ as d}from"./InputField.vue_vue_type_script_setup_true_lang-D9RiLvv4.js";import{A as C,_ as L}from"./AuthLayout-u9p4DrZ3.js";import{_ as R}from"./Button.vue_vue_type_script_setup_true_lang-BbkNuzaL.js";import"./index-BCqgpTI_.js";import{p as r,_ as U,f as q,o as A,s as p,m as B,e as O,b as S}from"./TheForm.vue_vue_type_script_setup_true_lang-CDOP5UD6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"sm:mx-auto flex items-center flex-col sm:w-full sm:max-w-md"},K={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},T={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},Q=b({__name:"Invite",setup(j){const u=v(),c=k(),e=y({email:"",password:"",password_confirmation:""}),_=r(A({email:r(p(),O()),password:r(p(),B(8,"Пароль должен быть не менее 8 символов")),password_confirmation:p()}),q(S([["password"],["password_confirmation"]],t=>t.password===t.password_confirmation,"Пароли не совпадают"),["password_confirmation"]));async function x(t){try{const a=await f.get("/invites/"+t);e.email=a.invite.user.email}catch(a){a.status===409&&await c.push(w.LOGIN)}}async function h(t){try{(await f.post(`/invites/${u.params.token}/activate`,t)).success&&($.success("Вы успешно зарегистрировались"),await c.push(w.LOGIN))}catch(a){console.error("Submission error:",a)}}return V(async()=>{await x(u.params.token)}),(t,a)=>(I(),g(C,null,{default:l(()=>[n("div",G,[i(o(L),{width:128,height:128}),a[3]||(a[3]=n("h2",{class:"text-center text-3xl font-extrabold text-gray-900"}," Задайте пароль для вашего аккаунта ",-1))]),n("div",K,[n("div",T,[i(o(U),{class:"space-y-6",schema:o(_),data:e,submit:h},{default:l(({errors:s})=>[i(o(d),{id:"email",modelValue:e.email,"onUpdate:modelValue":a[0]||(a[0]=m=>e.email=m),label:"Электронная почта",type:"email",disabled:"",autocomplete:"email",error:s==null?void 0:s.email,required:""},null,8,["modelValue","error"]),i(o(d),{id:"password",modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=m=>e.password=m),label:"Пароль",type:"password",autocomplete:"current-password",error:s==null?void 0:s.password,required:""},null,8,["modelValue","error"]),i(o(d),{id:"password-confirm",modelValue:e.password_confirmation,"onUpdate:modelValue":a[2]||(a[2]=m=>e.password_confirmation=m),label:"Подтверждение пароля",type:"password",autocomplete:"current-password",error:s==null?void 0:s.password_confirmation,required:""},null,8,["modelValue","error"]),i(o(R),{type:"submit",class:"w-full"},{default:l(()=>a[4]||(a[4]=[N("Войти")])),_:1})]),_:1},8,["schema","data"])])])]),_:1}))}});export{Q as default};
