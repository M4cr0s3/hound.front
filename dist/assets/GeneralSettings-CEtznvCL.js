import{d as V,c as j,k as v,C,a as b,b as t,e as l,q as B,w as y,f as o,t as S,j as P,K as I,o as x,h as K,x as N}from"./index-DyigCoU2.js";import{_ as n}from"./InputField.vue_vue_type_script_setup_true_lang-B082PeLO.js";import{I as u}from"./iconify-DSZAPTcl.js";import{_}from"./SubmitButton.vue_vue_type_script_setup_true_lang-8S4uJa_M.js";import{u as $}from"./projects-WUIpHE6f.js";import{P as U}from"./platforms-D8ztvdxx.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const h={class:"px-6 py-5 space-y-6"},D={class:"my-2 flex items-center"},A={class:"text-sm text-gray-700"},G={key:0,class:"space-y-4"},M={class:"mt-1 relative rounded-md shadow-sm"},R={class:"absolute inset-y-0 right-0 flex items-center pr-3"},q={class:"mt-1 relative rounded-md shadow-sm"},E={class:"absolute inset-y-0 right-0 flex items-center pr-3 space-x-1"},F=["title"],L={class:"mt-1 relative rounded-md shadow-sm"},O={class:"absolute inset-y-0 right-0 flex items-center pr-3"},z={class:"pt-4 border-t border-gray-200 flex justify-end"},H=V({__name:"GeneralSettings",props:{project:{}},setup(f){const k=f,r=j(()=>k.project.key),g=N(),a=$(),i=v(!1),m=v(null),w=()=>{i.value=!i.value,m.value&&(m.value.type=i.value?"text":"password")},p=d=>{navigator.clipboard.writeText(d),I.success("Скопировано в буфер обмена")};return C(()=>g.params.slug,()=>{a.fetchProject(g.params.slug)}),(d,e)=>{var c;return x(),b("div",null,[e[20]||(e[20]=t("div",{class:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white"},[t("h3",{class:"text-lg font-semibold text-gray-900"}," Основные настройки ")],-1)),t("div",h,[l(n,{id:"project-name",label:"Название проекта",modelValue:o(a).updateBody.name,"onUpdate:modelValue":e[0]||(e[0]=s=>o(a).updateBody.name=s)},{description:y(()=>e[9]||(e[9]=[t("p",{class:"mt-2 text-sm text-gray-500"}," Изменение названия проекта будет обновлять слаг проекта. ",-1)])),_:1},8,["modelValue"]),l(n,{id:"project-slug",label:"Slug проекта",modelValue:o(a).updateBody.slug,"onUpdate:modelValue":e[1]||(e[1]=s=>o(a).updateBody.slug=s),disabled:!0},{description:y(()=>e[10]||(e[10]=[t("p",{class:"mt-2 text-sm text-gray-500"}," Используется в ссылках и API эндпоинтах. ",-1)])),_:1},8,["modelValue"]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Платформа",-1)),t("div",D,[l(o(u),{icon:(c=o(U).find(s=>s.name===d.project.platform))==null?void 0:c.icon,class:"h-6 w-6 mr-2 text-gray-600"},null,8,["icon"]),t("span",A,S(d.project.platform),1)]),e[12]||(e[12]=t("p",{class:"mt-2 text-sm text-gray-500"}," Платформу нельзя изменить после создания проекта. ",-1))]),r.value?(x(),b("div",G,[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Публичный ключ",-1)),t("div",M,[l(n,{type:"text",modelValue:r.value.public_key,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.public_key=s),readonly:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-gray-50",id:"public-key"},null,8,["modelValue"]),t("div",R,[t("button",{onClick:e[3]||(e[3]=s=>p(r.value.public_key)),class:"text-gray-400 hover:text-gray-500 cursor-pointer",title:"Копировать"},[l(o(u),{icon:"heroicons:clipboard",class:"h-5 w-5"})])])]),e[14]||(e[14]=t("p",{class:"mt-2 text-sm text-gray-500"}," Используется для идентификации проекта в клиентских приложениях. ",-1))]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Приватный ключ",-1)),t("div",q,[l(n,{type:i.value?"text":"password",modelValue:r.value.private_key,"onUpdate:modelValue":e[4]||(e[4]=s=>r.value.private_key=s),readonly:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-gray-50",ref_key:"privateKeyInput",ref:m,id:"private-key"},null,8,["type","modelValue"]),t("div",E,[t("button",{onClick:w,class:"text-gray-400 hover:text-gray-500",title:i.value?"Скрыть":"Показать"},[l(o(u),{icon:i.value?"heroicons:eye-slash":"heroicons:eye",class:"h-5 w-5"},null,8,["icon"])],8,F),t("button",{onClick:e[5]||(e[5]=s=>p(r.value.private_key)),class:"text-gray-400 hover:text-gray-500 cursor-pointer",title:"Копировать"},[l(o(u),{icon:"heroicons:clipboard",class:"h-5 w-5"})])])]),e[16]||(e[16]=t("p",{class:"mt-2 text-sm text-gray-500"}," Держите в секрете, используется для аутентификации на сервере. ",-1))]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"DSN (Data Source Name)",-1)),t("div",L,[l(n,{id:"dsn",type:"text",modelValue:r.value.dsn,"onUpdate:modelValue":e[6]||(e[6]=s=>r.value.dsn=s),readonly:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-gray-50"},null,8,["modelValue"]),t("div",O,[t("button",{onClick:e[7]||(e[7]=s=>p(r.value.dsn)),class:"text-gray-400 hover:text-gray-500 cursor-pointer",title:"Копировать"},[l(o(u),{icon:"heroicons:clipboard",class:"h-5 w-5"})])])]),e[18]||(e[18]=t("p",{class:"mt-2 text-sm text-gray-500"}," Используйте эту строку для подключения к сервису. ",-1))])])):B("",!0),t("div",z,[l(_,{class:"cursor-pointer",onClick:e[8]||(e[8]=P(s=>o(a).update(d.project.slug,o(a).updateBody),["prevent"]))},{default:y(()=>e[19]||(e[19]=[K(" Сохранить изменения ")])),_:1})])])])}}}),te=T(H,[["__scopeId","data-v-30238537"]]);export{te as default};
