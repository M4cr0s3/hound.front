import{d as E,k as _,a as x,o as $,r as j,j as w}from"./index-aDw82BAL.js";var c;function d(e){return{lang:(e==null?void 0:e.lang)??(c==null?void 0:c.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(c==null?void 0:c.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(c==null?void 0:c.abortPipeEarly)}}var v;function P(e){return v==null?void 0:v.get(e)}var b;function S(e){return b==null?void 0:b.get(e)}var h;function I(e,r){var n;return(n=h==null?void 0:h.get(e))==null?void 0:n.get(r)}function M(e){var n,i;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((i=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:i.name))??"null":r}function o(e,r,n,i,t){const a=t&&"input"in t?t.input:n.value,u=(t==null?void 0:t.expected)??e.expects??null,s=(t==null?void 0:t.received)??M(a),l={kind:e.kind,type:e.type,input:a,expected:u,received:s,message:`Invalid ${r}: ${u?`Expected ${u} but r`:"R"}eceived ${s}`,requirement:e.requirement,path:t==null?void 0:t.path,issues:t==null?void 0:t.issues,lang:i.lang,abortEarly:i.abortEarly,abortPipeEarly:i.abortPipeEarly},p=e.kind==="schema",f=(t==null?void 0:t.message)??e.message??I(e.reference,l.lang)??(p?S(l.lang):null)??i.message??P(l.lang);f!==void 0&&(l.message=typeof f=="function"?f(l):f),p&&(n.typed=!1),n.issues?n.issues.push(l):n.issues=[l]}function m(e){return{version:1,vendor:"valibot",validate(r){return e["~run"]({value:r},d())}}}var k=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}},q=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu;function D(e){return{kind:"validation",type:"email",reference:D,expects:null,async:!1,requirement:q,message:e,"~run"(r,n){return r.typed&&!this.requirement.test(r.value)&&o(this,"email",r,n),r}}}function N(e,r){return{kind:"validation",type:"min_length",reference:N,async:!1,expects:`>=${e}`,requirement:e,message:r,"~run"(n,i){return n.typed&&n.value.length<this.requirement&&o(this,"length",n,i,{received:`${n.value.length}`}),n}}}function V(e,r){var n;if(e.issues)for(const i of r)for(const t of e.issues){let a=!1;const u=Math.min(i.length,((n=t.path)==null?void 0:n.length)??0);for(let s=0;s<u;s++)if(i[s]!==t.path[s].key&&(i[s]!=="$"||t.path[s].type!=="array")){a=!0;break}if(!a)return!1}return!0}function z(e,r,n){return{kind:"validation",type:"partial_check",reference:z,async:!1,expects:null,paths:e,requirement:r,message:n,"~run"(i,t){return(i.typed||V(i,e))&&!this.requirement(i.value)&&o(this,"input",i,t),i}}}function C(e,r,n){return typeof e.fallback=="function"?e.fallback(r,n):e.fallback}function A(e,r){return{...e,"~run"(n,i){const t=n.issues&&[...n.issues];if(n=e["~run"](n,i),n.issues){for(const a of n.issues)if(!(t!=null&&t.includes(a))){let u=n.value;for(const s of r){const l=u[s],p={type:"unknown",origin:"value",input:u,key:s,value:l};if(a.path?a.path.push(p):a.path=[p],!l)break;u=l}}}return n}}}function g(e,r,n){return typeof e.default=="function"?e.default(r,n):e.default}function F(e){return{kind:"schema",type:"date",reference:F,expects:"Date",async:!1,message:e,get"~standard"(){return m(this)},"~run"(r,n){return r.value instanceof Date?isNaN(r.value)?o(this,"type",r,n,{received:'"Invalid Date"'}):r.typed=!0:o(this,"type",r,n),r}}}function G(e){return{kind:"schema",type:"number",reference:G,expects:"number",async:!1,message:e,get"~standard"(){return m(this)},"~run"(r,n){return typeof r.value=="number"&&!isNaN(r.value)?r.typed=!0:o(this,"type",r,n),r}}}function O(e,r){return{kind:"schema",type:"object",reference:O,expects:"Object",async:!1,entries:e,message:r,get"~standard"(){return m(this)},"~run"(n,i){var a;const t=n.value;if(t&&typeof t=="object"){n.typed=!0,n.value={};for(const u in this.entries){const s=this.entries[u];if(u in t||(s.type==="exact_optional"||s.type==="optional"||s.type==="nullish")&&s.default!==void 0){const l=u in t?t[u]:g(s),p=s["~run"]({value:l},i);if(p.issues){const f={type:"object",origin:"value",input:t,key:u,value:l};for(const y of p.issues)y.path?y.path.unshift(f):y.path=[f],(a=n.issues)==null||a.push(y);if(n.issues||(n.issues=p.issues),i.abortEarly){n.typed=!1;break}}p.typed||(n.typed=!1),n.value[u]=p.value}else if(s.fallback!==void 0)n.value[u]=C(s);else if(s.type!=="exact_optional"&&s.type!=="optional"&&s.type!=="nullish"&&(o(this,"key",n,i,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:t,key:u,value:t[u]}]}),i.abortEarly))break}}else o(this,"type",n,i);return n}}}function B(e,r){return{kind:"schema",type:"optional",reference:B,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:r,get"~standard"(){return m(this)},"~run"(n,i){return n.value===void 0&&(this.default!==void 0&&(n.value=g(this,n,i)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,i)}}}function L(e){return{kind:"schema",type:"string",reference:L,expects:"string",async:!1,message:e,get"~standard"(){return m(this)},"~run"(r,n){return typeof r.value=="string"?r.typed=!0:o(this,"type",r,n),r}}}function R(e,r,n){const i=e["~run"]({value:r},d(n));if(i.issues)throw new k(i.issues);return i.value}function X(...e){return{...e[0],pipe:e,get"~standard"(){return m(this)},"~run"(r,n){for(const i of e)if(i.kind!=="metadata"){if(r.issues&&(i.kind==="schema"||i.kind==="transformation")){r.typed=!1;break}(!r.issues||!n.abortEarly&&!n.abortPipeEarly)&&(r=i["~run"](r,n))}return r}}}const H=E({__name:"TheForm",props:{schema:{},submit:{type:Function},data:{}},emits:["submit"],setup(e,{emit:r}){const n=e,i=r,t=_({});async function a(){try{t.value={};const s=await R(n.schema,n.data);await n.submit(s),i("submit",s)}catch(s){if(s instanceof k)t.value=u(s);else throw s}}function u(s){const l={};return s.issues.forEach(p=>{if(p.path){const f=p.path.map(y=>y.key).join(".");l[f]=p.message}}),l}return(s,l)=>($(),x("form",{onSubmit:w(a,["prevent"])},[j(s.$slots,"default",{errors:t.value})],32))}});export{H as _,B as a,z as b,F as d,D as e,A as f,N as m,G as n,O as o,X as p,L as s};
