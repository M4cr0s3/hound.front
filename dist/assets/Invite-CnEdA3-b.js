import{d as y,B as b,m as V,y as v,l as g,w as l,i as f,ae as k,g as I,R as w,o as N,b as n,e as i,f as o,h as $,K as B}from"./index-B605mWSS.js";import{_ as C}from"./Button.vue_vue_type_script_setup_true_lang-BvWJDmF7.js";import"./StacktraceViewer.vue_vue_type_style_index_0_scoped_8568d111_lang-OogGfIpQ.js";import"./iconify-e9sR0ZFq.js";import{_ as r}from"./InputField.vue_vue_type_script_setup_true_lang-DBN7DNb5.js";import{A as L,_ as R}from"./AuthLayout-Ddnza9uP.js";import{p as d,_ as U,f as q,o as O,s as p,m as S,e as A,b as E}from"./TheForm.vue_vue_type_script_setup_true_lang-CCNSZ3Rc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"sm:mx-auto flex items-center flex-col sm:w-full sm:max-w-md"},K={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},T={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},W=y({__name:"Invite",setup(j){const u=v(),c=I(),e=b({email:"",password:"",password_confirmation:""}),_=d(O({email:d(p(),A()),password:d(p(),S(8,"Пароль должен быть не менее 8 символов")),password_confirmation:p()}),q(E([["password"],["password_confirmation"]],t=>t.password===t.password_confirmation,"Пароли не совпадают"),["password_confirmation"]));async function h(t){try{const a=await f.get("/invites/"+t);e.email=a.invite.user.email}catch(a){if(a instanceof k&&a.status===409)await c.push(w.LOGIN);else throw a}}async function x(t){try{(await f.post(`/invites/${u.params.token}/activate`,t)).success&&(B.success("Вы успешно зарегистрировались"),await c.push(w.LOGIN))}catch(a){console.error("Submission error:",a)}}return V(async()=>{await h(u.params.token)}),(t,a)=>(N(),g(L,null,{default:l(()=>[n("div",G,[i(o(R),{width:128,height:128}),a[3]||(a[3]=n("h2",{class:"text-center text-3xl font-extrabold text-gray-900"}," Задайте пароль для вашего аккаунта ",-1))]),n("div",K,[n("div",T,[i(o(U),{class:"space-y-6",schema:o(_),data:e,submit:x},{default:l(({errors:s})=>[i(o(r),{id:"email",modelValue:e.email,"onUpdate:modelValue":a[0]||(a[0]=m=>e.email=m),label:"Электронная почта",type:"email",disabled:"",autocomplete:"email",error:s==null?void 0:s.email,required:""},null,8,["modelValue","error"]),i(o(r),{id:"password",modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=m=>e.password=m),label:"Пароль",type:"password",autocomplete:"current-password",error:s==null?void 0:s.password,required:""},null,8,["modelValue","error"]),i(o(r),{id:"password-confirm",modelValue:e.password_confirmation,"onUpdate:modelValue":a[2]||(a[2]=m=>e.password_confirmation=m),label:"Подтверждение пароля",type:"password",autocomplete:"current-password",error:s==null?void 0:s.password_confirmation,required:""},null,8,["modelValue","error"]),i(o(C),{type:"submit",class:"w-full"},{default:l(()=>a[4]||(a[4]=[$("Войти")])),_:1})]),_:1},8,["schema","data"])])])]),_:1}))}});export{W as default};
