import{d as S,c as V,a as o,o as r,b as a,t as i,k as b,q as x,F as k,n as w,e as $,h as B,f as E,p as C,ad as F}from"./index-BCF3V4H9.js";import{I}from"./iconify-B7i5wVmN.js";import"./StacktraceViewer.vue_vue_type_style_index_0_scoped_8568d111_lang-OogGfIpQ.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"bg-gray-50 rounded-md p-4"},O={class:"text-sm overflow-x-auto"},Z=S({__name:"JsonViewer",props:{data:{}},setup(_){const v=_,d=V(()=>JSON.stringify(v.data,null,2));return(l,g)=>(r(),o("div",z,[a("pre",O,i(d.value),1)]))}}),W={class:"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden"},j={class:"flex items-center justify-between bg-gray-100 px-4 py-2 border-b border-gray-200"},q={key:0,class:"divide-y divide-gray-200 max-h-96 overflow-y-auto"},D=["onClick"],T={class:"text-xs font-mono text-gray-500 w-8 flex-shrink-0"},A={class:"flex-1 min-w-0"},G={class:"text-sm font-medium text-gray-900 mb-1"},H={key:0},K={class:"text-xs text-gray-500 font-mono truncate"},M={key:0,class:"px-4 pb-3 ml-8"},P={class:"text-gray-400 w-10 flex-shrink-0 text-right pr-2"},Q=S({__name:"StacktraceViewer",props:{stacktrace:{},canCollapse:{type:Boolean}},setup(_){const v=_,d=b(!1),l=b([]);function g(e){var h,y,m;if(!(e!=null&&e.codeSnippet))return[];const n=[];let t=e.line-(((h=e.codeSnippet.preContext)==null?void 0:h.length)??0),c=[],s=0;const p=L=>{let u=L||"";u=u.replace(/: :/g,"::");const f=u.trim();f.startsWith("}")&&c.length>0&&(s=c.pop()||0),n.push({lineNumber:t++,code:u,indentLevel:s}),f.endsWith("{")&&(c.push(s),s++)};return(y=e.codeSnippet.preContext)==null||y.forEach(p),e.codeSnippet.contextLine&&p(e.codeSnippet.contextLine),(m=e.codeSnippet.postContext)==null||m.forEach(p),n}const N=e=>{const n=l.value.indexOf(e);n>-1?l.value.splice(n,1):l.value.push(e)};return v.stacktrace.length>0&&l.value.push(0),(e,n)=>(r(),o("div",W,[a("div",j,[n[1]||(n[1]=a("span",{class:"text-xs font-medium text-gray-700"},"Стектрейс",-1)),e.canCollapse?(r(),o("button",{key:0,onClick:n[0]||(n[0]=t=>d.value=!d.value),class:"text-xs text-gray-500 hover:text-gray-700 cursor-pointer"},i(d.value?"Открыть":"Скрыть"),1)):x("",!0)]),d.value?x("",!0):(r(),o("div",q,[(r(!0),o(k,null,w(e.stacktrace,(t,c)=>(r(),o("div",{key:c,class:"hover:bg-gray-50 transition-colors duration-100"},[a("div",{class:"px-4 py-3 cursor-pointer flex items-start",onClick:s=>N(c)},[a("span",T,"#"+i(c),1),a("div",A,[a("div",G,[t.class?(r(),o("span",H,i(t.class)+i(t.type),1)):x("",!0),B(" "+i(t.function||"(anonymous function)"),1)]),a("div",K,i(t.file)+":"+i(t.line),1)]),$(E(I),{icon:l.value.includes(c)?"mdi:chevron-up":"mdi:chevron-down",class:"h-4 w-4 text-gray-400 ml-2 flex-shrink-0"},null,8,["icon"])],8,D),l.value.includes(c)?(r(),o("div",M,[(r(!0),o(k,null,w(g(t),(s,p)=>(r(),o("div",{key:p,class:C(["px-3 py-1 text-sm font-mono flex hover:bg-gray-50",{"bg-blue-50":s.lineNumber===t.line,"text-gray-500":s.lineNumber!==t.line}])},[a("span",P,i(s.lineNumber),1),a("span",{class:C(["flex-1 whitespace-pre",{"text-blue-600 font-medium":s.lineNumber===t.line}]),style:F({"padding-left":`${s.indentLevel*1.5}rem`})},i(s.code||""),7)],2))),128))])):x("",!0)]))),128))]))]))}}),ee=J(Q,[["__scopeId","data-v-8568d111"]]);export{ee as S,Z as _};
