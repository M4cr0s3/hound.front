import{I as V}from"./iconify-nGeM3Ss7.js";import{d as S,k as b,a as o,o as r,b as a,q as x,t as i,F as k,n as w,e as $,h as B,f as E,p as C,ad as F,c as I}from"./index-Dr8GC7C8.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden"},O={class:"flex items-center justify-between bg-gray-100 px-4 py-2 border-b border-gray-200"},W={key:0,class:"divide-y divide-gray-200 max-h-96 overflow-y-auto"},j=["onClick"],q={class:"text-xs font-mono text-gray-500 w-8 flex-shrink-0"},D={class:"flex-1 min-w-0"},T={class:"text-sm font-medium text-gray-900 mb-1"},A={key:0},G={class:"text-xs text-gray-500 font-mono truncate"},H={key:0,class:"px-4 pb-3 ml-8"},K={class:"text-gray-400 w-10 flex-shrink-0 text-right pr-2"},M=S({__name:"StacktraceViewer",props:{stacktrace:{},canCollapse:{type:Boolean}},setup(_){const v=_,d=b(!1),l=b([]);function g(e){var h,y,m;if(!(e!=null&&e.codeSnippet))return[];const n=[];let t=e.line-(((h=e.codeSnippet.preContext)==null?void 0:h.length)??0),c=[],s=0;const p=L=>{let u=L||"";u=u.replace(/: :/g,"::");const f=u.trim();f.startsWith("}")&&c.length>0&&(s=c.pop()||0),n.push({lineNumber:t++,code:u,indentLevel:s}),f.endsWith("{")&&(c.push(s),s++)};return(y=e.codeSnippet.preContext)==null||y.forEach(p),e.codeSnippet.contextLine&&p(e.codeSnippet.contextLine),(m=e.codeSnippet.postContext)==null||m.forEach(p),n}const N=e=>{const n=l.value.indexOf(e);n>-1?l.value.splice(n,1):l.value.push(e)};return v.stacktrace.length>0&&l.value.push(0),(e,n)=>(r(),o("div",z,[a("div",O,[n[1]||(n[1]=a("span",{class:"text-xs font-medium text-gray-700"},"Стектрейс",-1)),e.canCollapse?(r(),o("button",{key:0,onClick:n[0]||(n[0]=t=>d.value=!d.value),class:"text-xs text-gray-500 hover:text-gray-700 cursor-pointer"},i(d.value?"Открыть":"Скрыть"),1)):x("",!0)]),d.value?x("",!0):(r(),o("div",W,[(r(!0),o(k,null,w(e.stacktrace,(t,c)=>(r(),o("div",{key:c,class:"hover:bg-gray-50 transition-colors duration-100"},[a("div",{class:"px-4 py-3 cursor-pointer flex items-start",onClick:s=>N(c)},[a("span",q,"#"+i(c),1),a("div",D,[a("div",T,[t.class?(r(),o("span",A,i(t.class)+i(t.type),1)):x("",!0),B(" "+i(t.function||"(anonymous function)"),1)]),a("div",G,i(t.file)+":"+i(t.line),1)]),$(E(V),{icon:l.value.includes(c)?"mdi:chevron-up":"mdi:chevron-down",class:"h-4 w-4 text-gray-400 ml-2 flex-shrink-0"},null,8,["icon"])],8,j),l.value.includes(c)?(r(),o("div",H,[(r(!0),o(k,null,w(g(t),(s,p)=>(r(),o("div",{key:p,class:C(["px-3 py-1 text-sm font-mono flex hover:bg-gray-50",{"bg-blue-50":s.lineNumber===t.line,"text-gray-500":s.lineNumber!==t.line}])},[a("span",K,i(s.lineNumber),1),a("span",{class:C(["flex-1 whitespace-pre",{"text-blue-600 font-medium":s.lineNumber===t.line}]),style:F({"padding-left":`${s.indentLevel*1.5}rem`})},i(s.code||""),7)],2))),128))])):x("",!0)]))),128))]))]))}}),Y=J(M,[["__scopeId","data-v-8568d111"]]),P={class:"bg-gray-50 rounded-md p-4"},Q={class:"text-sm overflow-x-auto"},Z=S({__name:"JsonViewer",props:{data:{}},setup(_){const v=_,d=I(()=>JSON.stringify(v.data,null,2));return(l,g)=>(r(),o("div",P,[a("pre",Q,i(d.value),1)]))}});export{Y as S,Z as _};
