import{h as f,F as b}from"./client-D6K6htDN.js";import{_ as y}from"./Button.vue_vue_type_script_setup_true_lang-DLJ3rjid.js";import"./StacktraceViewer.vue_vue_type_style_index_0_scoped_7fdb99e3_lang-B8VJLqpg.js";import{_ as l}from"./InputField.vue_vue_type_script_setup_true_lang-BrMCFGzf.js";import{A as V,_ as v}from"./AuthLayout-BYAEeMcE.js";import{p as r,_ as g,f as k,o as I,s as d,m as N,e as $,b as C}from"./TheForm.vue_vue_type_script_setup_true_lang-BcdpkkpR.js";import{d as L,z as R,k as U,v as q,j as B,w as p,f as O,R as w,o as S,b as n,e as i,u as o,g as j,K as A}from"./index-BJM9FpXo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"sm:mx-auto flex items-center flex-col sm:w-full sm:max-w-md"},F={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},G={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},W=L({__name:"Invite",setup(K){const u=q(),c=O(),e=R({email:"",password:"",password_confirmation:""}),_=r(I({email:r(d(),$()),password:r(d(),N(8,"Пароль должен быть не менее 8 символов")),password_confirmation:d()}),k(C([["password"],["password_confirmation"]],t=>t.password===t.password_confirmation,"Пароли не совпадают"),["password_confirmation"]));async function h(t){try{const a=await f.get("/invites/"+t);e.email=a.invite.user.email}catch(a){if(a instanceof b&&a.status===409)await c.push(w.LOGIN);else throw a}}async function x(t){try{(await f.post(`/invites/${u.params.token}/activate`,t)).success&&(A.success("Вы успешно зарегистрировались"),await c.push(w.LOGIN))}catch(a){console.error("Submission error:",a)}}return U(async()=>{await h(u.params.token)}),(t,a)=>(S(),B(V,null,{default:p(()=>[n("div",E,[i(o(v),{width:128,height:128}),a[3]||(a[3]=n("h2",{class:"text-center text-3xl font-extrabold text-gray-900"}," Задайте пароль для вашего аккаунта ",-1))]),n("div",F,[n("div",G,[i(o(g),{class:"space-y-6",schema:o(_),data:e,submit:x},{default:p(({errors:s})=>[i(o(l),{id:"email",modelValue:e.email,"onUpdate:modelValue":a[0]||(a[0]=m=>e.email=m),label:"Электронная почта",type:"email",disabled:"",autocomplete:"email",error:s==null?void 0:s.email,required:""},null,8,["modelValue","error"]),i(o(l),{id:"password",modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=m=>e.password=m),label:"Пароль",type:"password",autocomplete:"current-password",error:s==null?void 0:s.password,required:""},null,8,["modelValue","error"]),i(o(l),{id:"password-confirm",modelValue:e.password_confirmation,"onUpdate:modelValue":a[2]||(a[2]=m=>e.password_confirmation=m),label:"Подтверждение пароля",type:"password",autocomplete:"current-password",error:s==null?void 0:s.password_confirmation,required:""},null,8,["modelValue","error"]),i(o(y),{type:"submit",class:"w-full"},{default:p(()=>a[4]||(a[4]=[j("Войти")])),_:1,__:[4]})]),_:1},8,["schema","data"])])])]),_:1}))}});export{W as default};
